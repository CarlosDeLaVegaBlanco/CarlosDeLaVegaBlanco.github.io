<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OBSEA Arducam 64mp</title>
    <link rel="icon" href="/assets/favicon.ico" type="image/x-icon" />
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            background-color: #f2f2f2;
        }

        header {
            background-color: #004080;
            color: white;
            padding: 15px 20px;
            text-align: left;
            display: flex;
            align-items: center;
        }

        h1 {
            margin: 0;
            font-size: 24px;
            margin-left: 10px;
        }

        img.logo {
            height: 40px;
            margin-right: 10px;
        }

        a {
            color: white;
            text-decoration: none;
            padding: 8px 12px;
            background-color: #0066cc;
            border-radius: 5px;
            transition: background-color 0.3s ease;
            margin-left: auto;
        }

            a:hover {
                background-color: #004080;
            }

        main {
            margin: 40px;
            flex: 1;
            display: flex; /* Divide la pantalla en dos columnas */
            flex-direction: column; /* Alinear las columnas verticalmente */
        }

        .tabs {
            display: flex;
            flex-direction: column; /* Alinear las pestañas verticalmente */
            margin-bottom: 20px;
        }

        .tab {
            padding: 8px 12px; /* Ajusta el espacio interno según tus preferencias */
            margin-right: 10px;
            cursor: pointer;
            border-radius: 5px;
            transition: background-color 0.3s ease;
            margin-bottom: 5px; /* Espacio entre las pestañas */
        }

            .tab.active {
                background-color: #004080; /* Cambia el color de fondo de la pestaña activa */
                color: white; /* Cambia el color del texto de la pestaña activa */
            }

        .content {
            display: flex;
            flex: 1; /* Ocupa todo el espacio disponible */
        }

        .left-column {
            flex: 1; /* Toma la mitad del espacio disponible */
            padding-right: 20px; /* Espacio entre las dos columnas */
        }

        .right-column {
            flex: 1; /* Toma la otra mitad del espacio disponible */
        }

        footer {
            padding: 10px;
            background-color: #004080;
            color: white;
            text-align: center;
        }

        #galleryContent img {
            width: 100px;
            height: auto;
            margin-right: 10px;
            cursor: pointer;
        }

            #galleryContent img:hover {
                opacity: 0.7;
            }

            #galleryContent img:focus {
                width: 300px;
                transition: width 0.5s;
                z-index: 1;
            }
    </style>
</head>
<body>

    <header>
        <img src="assets/medusablanca.png" alt="Logo" class="logo">
        <img src="assets/logoobseablanco.png" alt="Logo" class="logo">
        <h1>Raspberry Pi Arducam 64mp Images</h1>
        <a href="https://www.obsea.es/" target="_blank">Home</a>
    </header>

    <main>
        <p>Aquí va el resto del texto y las foticos yeyyy</p>

        <div class="tabs">
            <div class="tab" onclick="openTab('gallery')" data-tab="gallery">Galería de Fotos</div>
            <div class="tab" onclick="openTab('charts')" data-tab="charts">Gráficos Dinámicos</div>
        </div>

        <div class="content">
            <div class="left-column">
                <div id="galleryTab" class="tab-content">
                    <!-- Contenido de la pestaña de Galería de Fotos -->
                    <div id="galleryContent"></div>
                </div>

                <div id="chartsTab" class="tab-content">
                    <!-- Contenido de la pestaña de Gráficos Dinámicos -->
                    <p>Aquí va el contenido de los Gráficos Dinámicos.</p>
                    <!-- Añade la galería aquí también -->
                    <div id="galleryContentCharts"></div>
                </div>
            </div>

            <div class="right-column">
                <p>Aquí va el resto del texto y las foticos yeyyy</p>
            </div>
        </div>
    </main>

    <footer>
        <p>&copy; 2024 Carlos de la Vega Blanco.</p>
    </footer>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            // Inicialmente, muestra la pestaña de la galería y marca como activa
            openTab('gallery');
        });

        function openTab(tabName) {
            var i, tabContent, tabLinks;
            tabContent = document.getElementsByClassName("tab-content");
            for (i = 0; i < tabContent.length; i++) {
                tabContent[i].style.display = "none";
            }
            tabLinks = document.getElementsByClassName("tab");
            for (i = 0; i < tabLinks.length; i++) {
                tabLinks[i].classList.remove("active");
            }
            document.getElementById(tabName + "Tab").style.display = "block";
            document.querySelector(".tab[data-tab='" + tabName + "']").classList.add("active");

            if (tabName === 'gallery') {
                // Si se selecciona la pestaña de Galería de Fotos, cargar las imágenes
                loadImages();
            }
            else if (tabName === 'charts') {
                // Si se selecciona la pestaña de Gráficos, cargar las imágenes también
                loadImagesCharts();
            }
        }

        function loadImages() {
            var galleryContent = document.getElementById('galleryContent');
            galleryContent.innerHTML = ''; // Limpiar el contenido existente

            // Ruta de la carpeta de imágenes
            var imagePath = 'static/';

            // Array con los nombres de las imágenes (puedes incluirlos manualmente o cargarlos dinámicamente)
            var imageNames = ['photo_2024_05_20-01_38_10.jpg', 'photo_2024_05_13-11_54_51.jpg'];

            // Recorrer el array de nombres de imágenes y crear elementos <img> para cada una
            imageNames.forEach(function (imageName) {
                var img = document.createElement('img');
                img.src = imagePath + imageName;
                img.onclick = function () {
                    // Al hacer clic en una imagen, muestra la versión grande en la columna derecha
                    var resultImg = new Image();
                    var resultName = 'result_' + imageName;
                    resultImg.onload = function () {
                        var maxWidth = document.querySelector('.right-column').clientWidth;
                        var maxHeight = document.querySelector('.right-column').clientHeight;
                        var ratio = Math.min(maxWidth / resultImg.width, maxHeight / resultImg.height);
                        var newWidth = Math.min(resultImg.width * ratio, maxWidth);
                        var newHeight = Math.min(resultImg.height * ratio, maxHeight);
                        resultImg.width = newWidth;
                        resultImg.height = newHeight;
                        var rightColumn = document.querySelector('.right-column');
                        // Eliminar cualquier imagen grande existente antes de agregar una nueva
                        rightColumn.innerHTML = '';
                        rightColumn.appendChild(resultImg);
                    };
                    resultImg.src = imagePath + resultName;
                };
                galleryContent.appendChild(img);
            });
        }

        function loadImagesCharts() {
            console.log('loadImagesCharts() llamado');
            // Limpiar el contenido existente
            var galleryContentCharts = document.getElementById('galleryContentCharts');
            galleryContentCharts.innerHTML = '';

            // Cargar los datos del archivo JSON
            fetch('datos_peces.json')
                .then(response => response.json())
                .then(data => {
                    // Crear el histograma
                    var histogram = document.createElement('div');
                    histogram.id = 'histogram';

                    // Iterar sobre los datos y agregar barras al histograma
                    for (var fish in data) {
                        var bar = document.createElement('div');
                        bar.style.height = data[fish] * 10 + 'px'; // Escalar la altura de la barra
                        bar.textContent = fish + ': ' + data[fish];
                        histogram.appendChild(bar);
                    }

                    // Agregar el histograma al contenedor
                    galleryContentCharts.appendChild(histogram);
                })
                .catch(error => console.error('Error cargando el archivo JSON:', error));
        }

    </script>

</body>
</html>
